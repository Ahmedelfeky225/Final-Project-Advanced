<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!--bootstrap import-->
     <!--bootstrap js import-->
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
     <!--bootstrap js import-->
    <!--bootstrap css import-->
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <!--bootstrap css import-->
    <!--bootstrap import-->
    <!--custome Style-->
    <link rel="stylesheet" href="style.css">
    <!--custome Style-->
    <!--axios import-->
    <script src="node_modules/axios/dist/axios.min.js"></script>
     <!--axios import-->
</head>
<body>
  <!--Loader-->
       <div class="back-roll"  id="loader">
    <div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
</div>
      <!--Loader-->
  <!--MODAL Login//-->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="exampleModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Login</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">username:</label>
            <input type="text" class="form-control" id="input1" value="Ahmed148" >
          </div>
          <div class="mb-3">
            <label for="message-text" class="col-form-labez">password:</label>
            <input type="password" class="form-control" id="input2" value="01005845202">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="logbtn">Login</button>
      </div>
    </div>
  </div>
</div>
    <!--MODAL Login//-->
    <!--=========================MODAL Register=====================================-->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Register</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">image:</label>
            <input type="file" class="form-control" id="image-input">
          </div>
           <div class="mb-3">
            <label for="recipient-name" class="col-form-label">name:</label>
            <input type="text" class="form-control" id="name-input">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">username:</label>
            <input type="text" class="form-control" id="username-input">
          </div>
          <div class="mb-3">
            <label for="message-text" class="col-form-label">Password:</label>
            <input type="password" class="form-control" id="password-input">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="close">Close</button>
        <button type="button" class="btn btn-primary" id="registerBtn">Register</button>
      </div>
    </div>
  </div>
</div>

    <!--=======================MODAL Register=========================================-->
<!--  || div Alert After Login || -->
    <div id="myAlert" class="fade show" style="position: fixed; right: 0; top:70px;z-index: 1000;"></div>
 <!--  || div Alert After Login || -->

    <!-- NavBar Container -->
<div class="container">
<div class="d-flex justify-content-center">
    <div class="col-9">
        <nav class="navbar navbar-expand-lg bg-body-tertiary shadow rounded pt-2">
  <div class="container-fluid">
    <a class="navbar-brand" href="home.htm">Tarmeez</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="home.htm">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="profileClicked()" style="cursor: pointer;">Profile</a>
        </li>
      </ul>
        <!--button-->
       <div class="d-flex justify-content-end w-100">
       <!--==============Logout buttons====================-->
     <div id="btnsloginRegister">
              <button type="button" class="btn btn-outline-success mx-1" id="btnLog" data-bs-toggle="modal" data-bs-target="#loginModal">Login</button>
             <button type="button" class="btn btn-outline-success" id="btnRegister" data-bs-toggle="modal" data-bs-target="#registerModal">Register</button>
     </div>
       <!--==============Login button====================-->

       <!--==============Logout buttons====================-->
       <div id="btnlogout" class="d-flex">
           <!--=============Profile Image And Username=====================-->
        <div id="dataUser">
             <img src="images/team-02.png" alt="img1" class="rounded-circle border border-2" style="width: 40px; height: 40px; margin-right:-2px !important;" id="profile-Image" >
        <b id="userName" style="margin-right: 5px;">@yahmm</b>
        </div>
      <!--=============Profile Image And Username=====================-->
        <button type="button" class="btn btn-outline-danger" onclick="logOut()" id="btnLogOut">Logout</button>
       </div>
        <!--==============LogIn buttons====================-->
        </div>
       <!--button-->
    </div>
  </div>
</nav>
</div>
</div>
</div>
<!-- NavBar Container -->

    <!--Main Content-->
<div class="container" >
    <!--posts-->
<div class="d-flex justify-content-center mt-5">
<div class="col-9 mb-2" id="post">
    <h1>
        <span>Ahmed's</span>
        Post
    </h1>
<div id="postsss">
       <div class="card shadow">
  <div class="card-header">
      <img src="images/team-02.png" alt="img1" class="rounded-circle border border-2" style="width: 40px; height: 40px;">
    <b>@yahmm</b>
  </div>
  <div class="card-body" style="padding-bottom: 0;">
    <img src="./placeholderImages/2.jpg" class="w-100" alt="">
    <h6 style="color: rgb(168, 168, 168);" class="mt-1">2 min ago</h6>
    <h5>Hello World</h5>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sapiente voluptas nobis vero ipsa eius ipsam modi, dolorem velit molestias ex iure eligendi ad placeat accusantium quibusdam? Dicta exercitationem tempore quo?</p>
    <hr>
    <div>
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
    <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"/>
    </svg>
      <span>(3) Comments</span>
    </div>
    <hr>
    </div>
    <!--Comments-->
    <div class="bg-primary-subtle p-2" id="commentts">
        <!--comment 1-->
        <div class="comment">
            <div class="info d-flex align-items-center">
                <img src="images/a.jpg" alt="" style="width: 30px; height: 30px; border-radius: 50%;">
            <span class="mx-1" style="font-weight: 500; font-size: 15px;">Ahmed</span>
            </div>
            <p style="font-size: 15px; margin-top: 6px;">This Is Comment</p>
        </div>
        <!--comment 1-->
         <div class="comment">
             <div class="info d-flex align-items-center">
                <img src="images/a.jpg" alt="" style="width: 30px; height: 30px; border-radius: 50%;">
            <span class="mx-1" style="font-weight: 500; font-size: 15px;">Ahmed</span>
            </div>
            <p style="font-size: 15px; margin-top: 6px;">This Is Comment</p>
        </div>
        <!--comment 1-->
         <div class="comment">
             <div class="info d-flex align-items-center">
                <img src="images/a.jpg" alt="" style="width: 30px; height: 30px; border-radius: 50%;">
            <span class="mx-1" style="font-weight: 500; font-size: 15px;">Ahmed</span>
            </div>
            <p style="font-size: 15px; margin-top: 6px;">This Is Comment</p>
        </div>
        <!--comment 1-->
    </div>
        <!--Comments-->
        <!--create Comment-->
        <div class="createComment d-flex">
            <input type="text" style="width: 94%; font-size: 14px; border: none; outline: none; border: 2px solid rgba(128, 128, 128, 0.432); border-right: none;" placeholder="add your comment"  >
        <button type="button" style="width: 6%; background-color: #fff; color: blue; border: 1px solid blue; border-radius: 4px; margin-left: 0px;">send</button>
        </div>
        <!--create Comment-->
  </div>
    <!--/post1/-->
</div>
</div>
</div>
</div>
</body>
<script src="web.js"></script>
<script>
const urlParams=new URLSearchParams(window.location.search)
let id=urlParams.get("postId")
console.log(id)
function getPost(){
  axios.get(`${baseUrl}/posts/${id}`)
.then((response)=>{
const post=response.data.data;
console.log(post)
let postTitle=""
if(post.title!=null){
    postTitle=post.title
}
let comments=post.comments
console.log(comments)
let contentComment=""
for(comment of comments){
     contentComment+=`
     <div class="comment">
             <div class="info d-flex align-items-center">
                <img src="${comment.author.profile_image}" alt="" style="width: 30px; height: 30px; border-radius: 50%;">
            <span class="mx-1" style="font-weight: 500; font-size: 15px;">${comment.author.username}</span>
            </div>
            <p style="font-size: 15px; margin-top: 3px;">${comment.body}</p>
        </div>
    `
}
let contentPost=`
    <h1>
        <span>${post.author.username}</span>
        Post
    </h1>
    <div class="card shadow">
  <div class="card-header">
      <img src="${post.author.profile_image}" alt="img1" class="rounded-circle border border-2" style="width: 40px; height: 40px;">
    <b>${post.author.username}</b>
  </div>
  <div class="card-body" style="padding-bottom:0px">
    <img src="${post.image}" class="w-100" alt="">
    <h6 style="color: rgb(168, 168, 168);" class="mt-1">${post.created_at}</h6>
    <h5>${postTitle}</h5>
    <p>${post.body}</p>
        <hr>
    <div>
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
    <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"/>
    </svg>
      <span>(${post.comments_count}) Comments</span>
    </div>
        <hr>
  </div>
  <div class=" p-2" id="commentts" style="background-color: #c675751c;">
    ${contentComment}
  </div>
    <!--create Comment-->
        <div class="mb-3 input-group" id="div-CreateComment">
            <input id="input-create-comment" type="text"  placeholder="add your comment..." class="form-control" style="padding-left:7px">
            <button onclick="createComments()" type="button" class="btn btn-outline-primary">send</button>
        </div>
        <!--create Comment-->
  </div>
`
document.getElementById("post").innerHTML=contentPost
setUpCreateComment()
}
)}
getPost()
setTimeout(()=>{
  console.log(`#`.repeat(50))
},2000)
function createComments(){
  let url=`${baseUrl}/posts/${id}/comments`
  let bodyComment=document.getElementById("input-create-comment")
  //console.log(bodyComment)
  let token=localStorage.getItem("token")

  let params={
    "body":bodyComment.value
  }
  axios.post(url,params,{
    headers:{
        'Authorization':`Bearer ${token}` 
    }
  })
  .then((response)=>{
      let body=response.data.data.body;
      getPost()
    showAlert("The Comment has been Created Successfully",'success')
   // console.log(body)
  })
  .catch((error)=>{
    //console.log(error.response.data.message)
  showAlert(error.response.data.message,'danger')
  })
}


//createComments()
</script>
</html>